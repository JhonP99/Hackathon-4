<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Simula tu ahorro con paneles solares." />
  <link rel="stylesheet" href="styles.css" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
  <title>Calculadora Solar Pro</title>
</head>
<body>
  <!-- HEADER -->
  <header class="main-header">
    <h2><i class="fa-solid fa-solar-panel"></i> SolarPro</h2>

    <nav>
      <a href="#">Inicio</a>
      <a href="#calculadora">Simulación</a>
      <a href="#faq">Preguntas</a>
    </nav>
  </header>

  <!-- HERO -->
  <main>
    <section class="hero">
        <div class="hero-content">
            <h1>Calcula tu ahorro instalando paneles solares</h1>
            <p>Descubre cuánto puedes reducir tu factura eléctrica y cuida el planeta.</p>
            <a href="#calculadora" class="btn-primary">Comenzar simulación</a>
        </div>
    </section>

    <!-- SECCIÓN CALCULADORA -->
    <section id="calculadora" class="calc-section">
      <header>
        <h2><i class="fa-solid fa-bolt"></i> Simulador Solar</h2>
        <p>Completa los datos para estimar tu ahorro energético y económico.</p>
      </header>

      <div class="calc-grid">
        <!-- FORMULARIO -->
        <form id="formCalc" class="calc-form">
          <h3><i class="fa-solid fa-map-location-dot"></i> Ubicación</h3>

          <label for="deptSelect">Departamento:</label>
          <select id="deptSelect"></select>

          <label for="muniSelect">Municipio:</label>
          <select id="muniSelect">
            <option value="" selected disabled>Seleccione un departamento</option>
          </select>

          <div class="divider"></div>

          <h3><i class="fa-solid fa-house-user"></i> Información de Vivienda</h3>

          <label for="estratoSelect">Estrato:</label>
          <select id="estratoSelect"></select>
          <p id="precioKwhHint" class="small-info"></p>

          <label for="consumoInput">Consumo mensual (kWh):</label>
          <input type="number" id="consumoInput" value="1000" min="1" />
          <p id="consumoPromedioHint" class="small-info"></p>

          <label for="numPaneles">Paneles sugeridos:</label>
          <div class="panel-control">
            <button type="button" onclick="cambiarPaneles(-1)">-</button>
            <input type="number" id="numPaneles" value="6" min="1" />
            <button type="button" onclick="cambiarPaneles(1)">+</button>
          </div>
          <p id="explicacionPaneles" class="small-info" >Basado en tu consumo.</p>

          <label for="calidadSelect">Calidad del panel solar:</label>
          <select id="calidadSelect">
            <option value="0.18">Estándar - 18%</option>
            <option value="0.21">Alta - 21%</option>
            <option value="0.25" selected>Superior - 25%</option>
          </select>

          <button type="button" class="btn-primary" onclick="calcularSimulacion()">Calcular Ahorro</button>
        </form>

        <!-- RESULTADOS -->
          <section class="card empty-state" id="estadoInicial">
              <div class="empty-content">
                  <i class="fa-solid fa-clipboard-list fa-4x empty-icon"></i>
                  <h3>Esperando datos...</h3>
                  <p>Completa el formulario de la izquierda para ver tu proyección financiera.</p>
              </div>
          </section>
        <div id="resultadosBox" class="results hidden">
          <h3><i class="fa-solid fa-chart-line"></i> Resultados de tu Simulación</h3>

          <!-- 1. Tarjetas KPI -->
          <div class="result-cards">
            <div>
              <p>Energía generada</p>
              <strong id="resEnergia">0 kWh/mes</strong>
            </div>
            <div>
              <p>Ahorro mensual</p>
              <strong id="resDinero">$0</strong>
            </div>
            <div>
              <p>Reducción</p>
              <strong id="resPorcentaje">0%</strong>
            </div>
          </div>

          <!-- 2. Gráfico Visual (NUEVO) -->
          <div class="chart-container">
            <h4 style="text-align: center; color: var(--text-muted); margin-bottom: 20px; font-weight:500;">Comparativa de Costos Mensuales</h4>
            
            <div class="bar-chart">
                <!-- Barra 1: Costo Actual -->
                <div class="bar-group">
                    <span id="labelCostoActual" class="bar-value">$0</span>
                    <div class="bar-wrapper">
                        <div class="bar red-bar" ></div>
                    </div>
                    <span class="bar-label">Sin Paneles</span>
                </div>

                <!-- Barra 2: Costo Con Paneles -->
                <div class="bar-group">
                    <span id="labelCostoPaneles" class="bar-value">$0</span>
                    <div class="bar-wrapper">
                        <div id="barNewHeight" class="bar teal-bar"></div>
                    </div>
                    <span class="bar-label">Con Paneles</span>
                </div>

                <!-- Barra 3: Ahorro -->
                <div class="bar-group">
                    <span id="labelAhorro" class="bar-value">$0</span>
                    <div class="bar-wrapper">
                        <div id="barSaveHeight" class="bar yellow-bar"></div>
                    </div>
                    <span class="bar-label">Tu Ahorro</span>
                </div>
            </div>
          </div>

          <!-- 3. Información del Footer -->
          <div class="info-footer">
            <p><strong>Consumo promedio:</strong> <span id="infoConsumo">--</span></p>
            <p><strong>Tarifa eléctrica:</strong> <span id="infoTarifa">--</span></p>
            <p><strong>Horas de sol:</strong> <span id="infoSol">--</span></p>
          </div>

          <!-- 4. Botón de Reinicio -->
          <button class="btn-secondary" onclick="resetearCalculadora()">
            <i class="fa-solid fa-rotate-left"></i> Nueva Simulación
          </button>
        </div>

      </div>
    </section>

    <!-- FAQ -->
    <section id="faq" class="faq-section">
      <h2>Preguntas Frecuentes</h2>
      <details>
        <summary>¿Cómo se calculan los resultados?</summary>
        <p>Se usan datos de radiación solar promedio y tarifas eléctricas almacenadas en una base de datos.</p>
      </details>
      <details>
        <summary>¿Qué incluye la tarifa?</summary>
        <p>Incluye el costo de generación, transmisión y comercialización vigente en tu región.</p>
      </details>
    </section>
  </main>

  <footer>
    <p>&copy; 2025 Hackathon 6. Todos los derechos reservados.</p>
  </footer>
  
  <script src="script.js"></script>
</body>
</html>